(this["webpackJsonpreact-notes-app"]=this["webpackJsonpreact-notes-app"]||[]).push([[0],[,,,,,,,,,,function(e,t,n){e.exports=n(24)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),o=n(8),r=n.n(o),c=n(9),i=n(1),u=n.n(i),l=n(6),p=n(2),d=n(3),h=n(5),m=n(4),g=(n(16),n(17),function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return s.a.createElement("h1",{id:"header"},"Note App")}}]),n}(s.a.Component)),f=(n(18),function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=s.a.createElement("button",{className:"add-button",onClick:this.props.addNoteClicked}," Add a note + ");return s.a.createElement("span",{className:"main"},e)}}]),n}(s.a.Component)),b=(n(19),function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.props.notesList.map((function(t,n){return s.a.createElement("div",{key:n,id:"display-"+n,className:"display"},s.a.createElement("p",{id:"note-"+n,contentEditable:e.props.isEditable[n],ref:function(t){return e.props.refsList.current[n]=t}}," ",t," "),s.a.createElement("button",{type:"button",className:"edit-button",onClick:function(){return e.props.edit(n)}}," Edit "),s.a.createElement("button",{type:"button",className:"delete-button",onClick:function(){return e.props.delete(n)}}," Delete "),e.props.isEditable[n]?s.a.createElement("button",{type:"button",id:"save-"+n,className:"save-button",onClick:function(){return e.props.save(n)}},"Save "):null)}));return s.a.createElement("div",null," ",t," ")}}]),n}(s.a.Component)),v=(n(20),function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=s.a.createElement("input",{type:"text",name:"currentNote",placeholder:"Enter a note",id:"inputNote",onChange:this.props.handleChange}),t=s.a.createElement("button",{type:"button",className:"create-note-button",onClick:this.props.handleCreate}," Create Note "),n=s.a.createElement("button",{type:"text",className:"close-new-note-button",onClick:this.props.closeAddNote});return this.props.showInputBox?s.a.createElement("span",{className:"input-box"},e,t,n):null}}]),n}(s.a.Component)),E=(n(21),function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=s.a.createElement("button",{type:"button",className:"login-button",onClick:this.props.handlePopup}," Login to save your notes! ");return this.props.isLoggedIn?null:s.a.createElement("span",{className:"login"}," ",e," ")}}]),n}(s.a.Component)),y=(n(22),function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e;e=this.props.isSignup?"CREATE ACCOUNT":"LOGIN";var t=s.a.createElement("input",{type:"text",id:"name",name:"name",placeholder:"Enter your name",onChange:this.props.handleChange}),n=s.a.createElement("input",{type:"text",name:"username",placeholder:"ENTER USERNAME",onChange:this.props.handleChange,ref:this.props.usernameRef}),a=s.a.createElement("input",{type:"password",name:"password",placeholder:"ENTER PASSWORD",onChange:this.props.handleChange}),o=s.a.createElement("button",{type:"submit",className:"login-submit",onClick:this.props.loginRequest},e),r=s.a.createElement("button",{type:"text",className:"close-button",onClick:this.props.handlePopup}),c=s.a.createElement("button",{type:"button",className:"login-submit",onClick:this.props.signupClicked},"Don't have an account? Sign up! "),i=s.a.createElement("div",null,this.props.isSignup&&t,s.a.createElement("br",null),s.a.createElement("br",null),n,s.a.createElement("p",{className:"validation-message"}),a,s.a.createElement("br",null),s.a.createElement("br",null),o,s.a.createElement("br",null)," ",s.a.createElement("br",null),!this.props.isSignup&&c,r);return this.props.showPopup?s.a.createElement("div",{className:"login-popup"},i):null}}]),n}(s.a.Component)),C=(n(23),function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return this.props.isLoggedIn?s.a.createElement("div",{className:"dropdown"},s.a.createElement("button",{title:"Account Settings",className:"user-settings"},s.a.createElement("div",{className:"dropdown-content"},s.a.createElement("button",{type:"button",onClick:this.props.handleLogout}," Logout"),s.a.createElement("button",{type:"button"},"Edit Profile")))):null}}]),n}(s.a.Component)),O=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).createUserRequest=Object(l.a)(u.a.mark((function e(){var t,n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("create"),t=a.URL+"/create",e.next=4,fetch(t,{method:"POST",headers:{"Content-type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({name:a.state.name,username:a.state.username,password:a.state.password})});case 4:return n=e.sent,e.next=7,n.text();case 7:s=e.sent,console.log(s),a.setState({showPopup:!1});case 10:case"end":return e.stop()}}),e)}))),a.loginRequest=Object(l.a)(u.a.mark((function e(){var t,n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.signup){e.next=13;break}return console.log("login request"),t=a.URL+"/auth",e.next=5,fetch(t,{method:"POST",headers:{"Content-type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({username:a.state.username,password:a.state.password})});case 5:return n=e.sent,e.next=8,n.text();case 8:s=e.sent,console.log(s),a.getUsername(),e.next=14;break;case 13:a.createUserRequest();case 14:case"end":return e.stop()}}),e)}))),a.signup=function(){console.log("signup"),a.setState({signup:!0})},a.handleAdd=function(){a.setState({addNoteClicked:!0,showInputBox:!0}),console.log("button clicked")},a.handleCreate=function(e){if(""===a.state.currentNote)return alert("Note can't be empty"),void e.preventDefault();a.state.loggedIn?a.setState({notesList:a.state.notesList.concat(a.state.currentNote),showInputBox:!1},a.updateDatabase):a.setState({notesList:a.state.notesList.concat(a.state.currentNote),showInputBox:!1})},a.getUsername=Object(l.a)(u.a.mark((function e(){var t,n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.URL+"/auth",e.next=3,fetch(t,{method:"GET",headers:{"Content-Type":"text/plain",Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});case 3:return n=e.sent,e.next=6,n.text();case 6:s=e.sent,console.log(n.status),console.log(s),(s=JSON.parse(s)).loggedIn?a.setState({loggedIn:s.loggedIn,username:s.username,userID:s.userID,showPopup:!1},a.getNotes):alert("Wrong Username/Password");case 11:case"end":return e.stop()}}),e)}))),a.updateDatabase=Object(l.a)(u.a.mark((function e(){var t,n,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.userID,n="".concat(a.URL,"/api/notes/").concat(t),e.next=4,fetch(n,{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({notes:a.state.notesList})});case 4:return s=e.sent,e.next=7,s.text();case 7:o=e.sent,console.log(o);case 9:case"end":return e.stop()}}),e)}))),a.handleEdit=function(e){var t=a.state.noteEditable;t[e]=!0,a.setState({noteEditable:t})},a.handleDelete=function(e){var t="display-"+e;console.log(t);var n=a.state.notesList;n.splice(e,1),a.state.loggedIn?a.setState({notesList:n},a.updateDatabase):a.setState({notesList:n})},a.saveAfterEdit=function(e){var t="note-"+e,n=a.state.noteEditable;n[e]=!1,a.setState({noteEditable:n});var s=a.state.notesList,o=a.refsList.current[e].innerText;console.log(a.state.currentNote),console.log(t),console.log(o),s.splice(e,1,o),console.log("after edit:"+s.toString()),a.state.loggedIn?a.setState({notesList:s},a.updateDatabase):a.setState({notesList:s})},a.handlePopup=function(){a.setState({showPopup:!a.state.showPopup,signup:!1})},a.handleLogout=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.URL+"/logout",e.next=3,fetch(t,{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest"}});case 3:200===e.sent.status&&a.setState({loggedIn:!1,username:null,userID:null,notesList:[]});case 5:case"end":return e.stop()}}),e)}))),a.getNotes=Object(l.a)(u.a.mark((function e(){var t,n,s,o,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("func"),t=a.state.userID,n="".concat(a.URL,"/notes/").concat(t),e.next=5,fetch(n,{method:"GET",headers:{"Content-Type":"text/plain",Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});case 5:return s=e.sent,e.next=8,s.json();case 8:for(o=e.sent,r=[],c=0;c<o.length;c++)r.push(o[c].note);a.setState({notesList:r});case 12:case"end":return e.stop()}}),e)}))),a.validateUsername=Object(l.a)(u.a.mark((function e(){var t,n,s,o,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.state.signup){e.next=11;break}return t="".concat(a.URL,"/validateUsername"),e.next=4,fetch(t,{method:"GET",headers:{"Content-Type":"text/plain",Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});case 4:return n=e.sent,e.next=7,n.json();case 7:for(s=e.sent,o=[],r=0;r<s.length;r++)o.push(s[r].username);return e.abrupt("return",o.includes(a.state.username)?Promise.resolve(!0):Promise.resolve(!1));case 11:case"end":return e.stop()}}),e)}))),a.handleChange=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t.target.name),a.setState(Object(c.a)({},t.target.name,t.target.value));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.closeAddNote=function(){console.log("ok"),a.setState({showInputBox:!1})},a.URL="https://reactnote-app.herokuapp.com",a.refsList=s.a.createRef(),a.refsList.current=[],console.log(a.URL),a.state={notesList:[],noteEditable:[],addNoteClicked:!1,showInputBox:!1,showPopup:!1,signup:!1,loggedIn:!1,name:null,username:null,password:null,userID:null,currentNote:null},a}return Object(d.a)(n,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(g,null),s.a.createElement(y,{showPopup:this.state.showPopup,handlePopup:this.handlePopup,signupClicked:this.signup,isSignup:this.state.signup,loginRequest:this.loginRequest,validateUsername:this.validateUsername,handleChange:this.handleChange}),s.a.createElement(E,{handlePopup:this.handlePopup,isLoggedIn:this.state.loggedIn}),s.a.createElement(f,{addNoteClicked:this.handleAdd}),s.a.createElement(v,{handleCreate:this.handleCreate,showInputBox:this.state.showInputBox,handleChange:this.handleChange,closeAddNote:this.closeAddNote}),s.a.createElement(b,{notesList:this.state.notesList,isEditable:this.state.noteEditable,edit:this.handleEdit,delete:this.handleDelete,save:this.saveAfterEdit,refsList:this.refsList}),s.a.createElement(C,{isLoggedIn:this.state.loggedIn,handleLogout:this.handleLogout}))}}]),n}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[10,1,2]]]);